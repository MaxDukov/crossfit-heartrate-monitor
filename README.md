# Монитор сердечного ритма для CrossFit

Веб-приложение для мониторинга сердечного ритма спортсменов в режиме реального времени с использованием ANT+ датчиков.

## Функциональность

- Мониторинг сердечного ритма в реальном времени
- Поддержка нескольких ANT+ датчиков
- Управление спортсменами (добавление, редактирование, удаление)
- Привязка датчиков к спортсменам
- Визуализация данных с цветовой индикацией интенсивности нагрузки
- Сохранение данных в SQLite базе данных

## Требования

- Python 3.8 или выше (протестировано в 3.11)
- ANT+ USB адаптер
- Датчики сердечного ритма с поддержкой ANT+

## Зависимости

```
flask
flask-socketio
openant
```

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/maxdukov/crossfit-hr-monitor.git
cd crossfit-hr-monitor
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
# или
venv\Scripts\activate  # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Запуск

1. Подключите ANT+ USB адаптер к компьютеру
2. Включите датчик сердечного ритма
3. Запустите приложение:
```bash
python hr.py
```
3. Откройте браузер и перейдите по адресу: `http://localhost:5000`

## Использование

### Мониторинг сердечного ритма

- На главной странице отображаются все активные датчики
- Для каждого датчика показывается:
  - Текущее значение ЧСС
  - График изменения ЧСС
  - Цветовая индикация интенсивности нагрузки:
    - Зеленый: ≤ 60% от максимального ЧСС
    - Желтый: 60-85% от максимального ЧСС
    - Красный: > 85% от максимального ЧСС

### Управление спортсменами

1. Нажмите кнопку "Управление спортсменами" на главной странице
2. На странице управления спортсменами вы можете:
   - Добавить нового спортсмена
   - Редактировать существующих спортсменов
   - Удалить спортсмена
   - Привязать датчик к спортсмену

### Привязка датчика к спортсмену

1. На главной странице нажмите кнопку "Привязать к спортсмену" на карточке датчика
2. Выберите спортсмена из списка
3. После привязки на карточке датчика будет отображаться имя спортсмена вместо номера датчика

## Структура проекта

```
crossfit-hr-monitor/
├── hr.py              # Основной файл приложения
├── requirements.txt   # Зависимости проекта
├── athletes.db        # База данных SQLite
└── templates/         # HTML шаблоны
    ├── index.html     # Главная страница
    └── athletes.html  # Страница управления спортсменами
```
## ToDo
 - Кастомизация интерфейса, возможность добавление лого
 - Dockerfile для сборки и запуска в виде контейнера
 - Интерфейс для добавление спортсменов с установкой персональной предельной ЧСС  (Done)
 - Цветовая градация зон пульса (Done)

## Лицензия

GNU GPL V2